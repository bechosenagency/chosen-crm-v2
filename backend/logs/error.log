{"code":"28000","file":"miscinit.c","length":100,"level":"error","line":"801","message":"Database connection failed: role \"postgres\" does not exist","name":"error","routine":"InitializeSessionUserId","service":"chosen-crm-backend","severity":"FATAL","stack":"error: role \"postgres\" does not exist\n    at /Users/teton/Desktop/chosen-crm/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async testConnection (/Users/teton/Desktop/chosen-crm/backend/src/config/database.js:29:20)\n    at async createTables (/Users/teton/Desktop/chosen-crm/backend/src/database/migrate.js:7:5)","timestamp":"2025-08-01 21:09:55"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query execution failed:","params":["a47fe694-2556-4e74-87e0-d063d2a6d032","Quicken Loans","https://www.quickenloans.com","+1-800-QUICKEN","rates@quickenloans.com",["Conventional","FHA","VA","Jumbo"]],"service":"chosen-crm-backend","text":"INSERT INTO lenders (id, name, website, phone, email, specialties)\n         VALUES ($1, $2, $3, $4, $5, $6)\n         ON CONFLICT (name) DO NOTHING","timestamp":"2025-08-01 21:14:24"}
{"error":"there is no unique or exclusion constraint matching the ON CONFLICT specification","level":"error","message":"Query execution failed:","params":["7beb6bfe-bc4c-4d5f-a4f3-f95de5602ea3","Quicken Loans","https://www.quickenloans.com","+1-800-QUICKEN","rates@quickenloans.com",["Conventional","FHA","VA","Jumbo"]],"service":"chosen-crm-backend","text":"INSERT INTO lenders (id, name, website, phone, email, specialties)\n         VALUES ($1, $2, $3, $4, $5, $6)\n         ON CONFLICT (name) DO NOTHING","timestamp":"2025-08-01 21:56:11"}
{"error":"duplicate key value violates unique constraint \"users_email_key\"","level":"error","message":"Query execution failed:","params":["9b6d818b-72f2-469d-98c8-2fbc8ba2f8aa","demo@chosen-crm.com","$2a$12$uKhL9xRg3HwKTa3XuCuQJeXlBX5UFiw8DAt85SBPHKM97x1oRma.i","John","Doe","+1-555-0123","Demo Mortgage","LO123456","loan_officer"],"service":"chosen-crm-backend","text":"INSERT INTO users (id, email, password_hash, first_name, last_name, phone, company, license_number, role)\n           VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)","timestamp":"2025-08-01 21:57:52"}
{"error":"duplicate key value violates unique constraint \"users_email_key\"","level":"error","message":"Query execution failed:","params":["c4d456d5-0ebb-4052-8b98-fe5cd2ed2d06","admin@chosen-crm.com","$2a$12$uKhL9xRg3HwKTa3XuCuQJeXlBX5UFiw8DAt85SBPHKM97x1oRma.i","Admin","User","+1-555-0124","ChosenCRM","AD123456","admin"],"service":"chosen-crm-backend","text":"INSERT INTO users (id, email, password_hash, first_name, last_name, phone, company, license_number, role)\n           VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)","timestamp":"2025-08-01 21:57:52"}
{"error":"insert or update on table \"leads\" violates foreign key constraint \"leads_user_id_fkey\"","level":"error","message":"Query execution failed:","params":["59eb3862-10b9-4f4c-89c8-d36d9a09f293","9b6d818b-72f2-469d-98c8-2fbc8ba2f8aa","Sarah","Johnson","sarah.johnson@email.com","+1-555-0101","Website","new","Interested in refinancing, credit score around 720"],"service":"chosen-crm-backend","text":"INSERT INTO leads (id, user_id, first_name, last_name, email, phone, source, status, notes)\n           VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)","timestamp":"2025-08-01 21:57:52"}
{"error":"duplicate key value violates unique constraint \"users_email_key\"","level":"error","message":"Query execution failed:","params":["06733eba-0702-42e8-b59c-e098a8e33ae7","demo@chosen-crm.com","$2a$12$09flUjHY8DQbXp/KUWFfUeflJjTTGEDEVtFug3xsA9xWwtPrvq/Py","John","Doe","+1-555-0123","Demo Mortgage","LO123456","loan_officer"],"service":"chosen-crm-backend","text":"INSERT INTO users (id, email, password_hash, first_name, last_name, phone, company, license_number, role)\n           VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)","timestamp":"2025-08-01 21:59:01"}
{"error":"duplicate key value violates unique constraint \"users_email_key\"","level":"error","message":"Query execution failed:","params":["bdd4339c-771e-4032-bb42-b9cd798f4af3","admin@chosen-crm.com","$2a$12$09flUjHY8DQbXp/KUWFfUeflJjTTGEDEVtFug3xsA9xWwtPrvq/Py","Admin","User","+1-555-0124","ChosenCRM","AD123456","admin"],"service":"chosen-crm-backend","text":"INSERT INTO users (id, email, password_hash, first_name, last_name, phone, company, license_number, role)\n           VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)","timestamp":"2025-08-01 21:59:01"}
{"ip":"::1","level":"error","message":"Error occurred: Access token required","method":"GET","service":"chosen-crm-backend","stack":"Error: Access token required\n    at verifyToken (/Users/teton/Desktop/chosen-crm/backend/src/middleware/auth.js:12:19)\n    at Layer.handle [as handle_request] (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:328:13)","timestamp":"2025-08-02 14:06:08","url":"/api/crm/events","userAgent":"curl/8.7.1"}
{"ip":"::1","level":"error","message":"Error occurred: Access token required","method":"GET","service":"chosen-crm-backend","stack":"Error: Access token required\n    at verifyToken (/Users/teton/Desktop/chosen-crm/backend/src/middleware/auth.js:12:19)\n    at Layer.handle [as handle_request] (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:328:13)","timestamp":"2025-08-02 14:15:30","url":"/api/marketing/landing-pages/templates","userAgent":"curl/8.7.1"}
{"ip":"::1","level":"error","message":"Error occurred: Invalid token","method":"POST","service":"chosen-crm-backend","stack":"Error: Invalid token\n    at verifyToken (/Users/teton/Desktop/chosen-crm/backend/src/middleware/auth.js:45:19)\n    at Layer.handle [as handle_request] (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/teton/Desktop/chosen-crm/backend/node_modules/express/lib/router/index.js:328:13)","timestamp":"2025-08-02 14:58:40","url":"/api/crm/leads","userAgent":"curl/8.7.1"}
{"error":"","level":"error","message":"Query execution failed:","params":["demo@chosen-crm.com"],"service":"chosen-crm-backend","text":"SELECT id, email, password_hash, first_name, last_name, role, is_active FROM users WHERE email = $1","timestamp":"2025-08-05 12:48:22"}
{"code":"ECONNREFUSED","level":"error","message":"Login error:","service":"chosen-crm-backend","stack":"AggregateError [ECONNREFUSED]: \n    at /Users/teton/Desktop/chosen-crm-v2/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (/Users/teton/Desktop/chosen-crm-v2/backend/src/config/database.js:45:17)\n    at async /Users/teton/Desktop/chosen-crm-v2/backend/src/routes/auth.js:148:20","timestamp":"2025-08-05 12:48:22"}
{"ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"chosen-crm-backend","stack":"AggregateError [ECONNREFUSED]: \n    at /Users/teton/Desktop/chosen-crm-v2/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (/Users/teton/Desktop/chosen-crm-v2/backend/src/config/database.js:45:17)\n    at async /Users/teton/Desktop/chosen-crm-v2/backend/src/routes/auth.js:148:20","timestamp":"2025-08-05 12:48:22","url":"/api/auth/login","userAgent":"node"}
{"error":"","level":"error","message":"Query execution failed:","params":["demo@chosen-crm.com"],"service":"chosen-crm-backend","text":"SELECT id, email, password_hash, first_name, last_name, role, is_active FROM users WHERE email = $1","timestamp":"2025-08-05 12:50:00"}
{"code":"ECONNREFUSED","level":"error","message":"Login error:","service":"chosen-crm-backend","stack":"AggregateError [ECONNREFUSED]: \n    at /Users/teton/Desktop/chosen-crm-v2/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (/Users/teton/Desktop/chosen-crm-v2/backend/src/config/database.js:45:17)\n    at async /Users/teton/Desktop/chosen-crm-v2/backend/src/routes/auth.js:148:20","timestamp":"2025-08-05 12:50:00"}
{"ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"chosen-crm-backend","stack":"AggregateError [ECONNREFUSED]: \n    at /Users/teton/Desktop/chosen-crm-v2/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (/Users/teton/Desktop/chosen-crm-v2/backend/src/config/database.js:45:17)\n    at async /Users/teton/Desktop/chosen-crm-v2/backend/src/routes/auth.js:148:20","timestamp":"2025-08-05 12:50:00","url":"/api/auth/login","userAgent":"node"}
{"error":"","level":"error","message":"Query execution failed:","params":["demo@chosen-crm.com"],"service":"chosen-crm-backend","text":"SELECT id, email, password_hash, first_name, last_name, role, is_active FROM users WHERE email = $1","timestamp":"2025-08-05 12:50:31"}
{"code":"ECONNREFUSED","level":"error","message":"Login error:","service":"chosen-crm-backend","stack":"AggregateError [ECONNREFUSED]: \n    at /Users/teton/Desktop/chosen-crm-v2/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (/Users/teton/Desktop/chosen-crm-v2/backend/src/config/database.js:45:17)\n    at async /Users/teton/Desktop/chosen-crm-v2/backend/src/routes/auth.js:148:20","timestamp":"2025-08-05 12:50:31"}
{"ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"chosen-crm-backend","stack":"AggregateError [ECONNREFUSED]: \n    at /Users/teton/Desktop/chosen-crm-v2/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (/Users/teton/Desktop/chosen-crm-v2/backend/src/config/database.js:45:17)\n    at async /Users/teton/Desktop/chosen-crm-v2/backend/src/routes/auth.js:148:20","timestamp":"2025-08-05 12:50:31","url":"/api/auth/login","userAgent":"node"}
